{% extends 'admin.html' %}
{% load bootstrap %}
{% block css %}
<link href="{{ STATIC_URL }}/css/smoothness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">
{% endblock %}
{% block titulo %}
Nuevo gasto
{% endblock %}
{% block seccion-contenido %}
<form method="POST" action="">{% csrf_token %}
    <div class="row">
        <div class="col-xs-12 col-sm-6">{{ formulario.nombre | bootstrap }}</div>
        <div class="col-xs-12 col-sm-6">{{ formulario.tipo | bootstrap }}</div>
        <div class="col-xs-12 col-sm-6">{{ formulario.forma_de_pago | bootstrap }}</div>
        <div class="col-xs-12 col-sm-6">{{ formulario.monto | bootstrap }}</div>
        <div class="col-xs-12 col-sm-6">
            <div class="form-group">
                <label class="control-label" for="id_frecuencia_de_pago">Frecuencia de pago</label>
                <div>
                    <select id="id_frecuencia_de_pago" class="form-control" name="frecuencia_de_pago" onchange="setFecha_pago(this.value)" >
                        <option selected="selected" value="">---------</option>
                        <option value="1">Semanal</option>
                        <option value="2">Quincenal</option>
                        <option value="3">Mensual</option>
                    </select>
                </div>
            </div>
        </div><div class="col-xs-12 col-sm-6">
            <div class="form-group">
                <label class="control-label" for="id_fecha_de_pago">Día</label>
                <div>
                    <select id="id_fecha_de_pago" class="form-control" name="fecha_de_pago" disabled="true"  onchange="chequear(this.value)" >
                        <option selected="selected" value="">---------</option>
                    </select>
                </div>
            </div>
        </div>
        <div hidden="true" id="alerta"class="col-sm-6 alert alert-danger">
        </div>
        <div class="col-xs-12 text-right">
            <div class="row">
                <div class="col-xs-12 col-md-6">
                    <input type="submit" class="btn btn-default btn-primary" value="Ingresar">
                </div>
                <div class="col-md-6 hidden-xs hidden-sm"></div>
            </div>
        </div>
    </div>
</form>
{% endblock %}
{% block js %}
<script type="text/javascript">

    $(function() {

        $( "#id_monto").val(3500);

        $( "#id_monto" ).spinner({
            min: 0,
            step: 50,
            numberFormat: "C",
            culture: "en-US"
        });

        document.getElementById("id_fecha_de_pago").setAttribute("type","select");

    });

function setFecha_pago(val){

    if(val == '1'){

        document.getElementById("id_fecha_de_pago").innerHTML = "<option selected='selected' value=''>---------</option><option value='1'>Lunes</option><option value='2'>Martes</option><option value='3'>Miercoles</option><option value='4'>Jueves</option><option value='5'>Viernes</option><option value='6'>Sabado</option><option value='7'>Domingo</option>";
        document.getElementById("id_fecha_de_pago").removeAttribute('disabled');
        document.getElementById("alerta").innerHTML = "";
        document.getElementById("alerta").setAttribute('hidden','true');

    }else if(val == '2'){

        document.getElementById("id_fecha_de_pago").innerHTML = "<option selected='selected' value=''>---------</option><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option><option value='11'>11</option><option value='12'>12</option><option value='13'>13</option><option value='14'>14</option><option value='15'>15</option>";
        document.getElementById("id_fecha_de_pago").removeAttribute('disabled');
        document.getElementById("alerta").innerHTML = "";
        document.getElementById("alerta").setAttribute('hidden','true');

    }else if(val == '3'){

        document.getElementById("id_fecha_de_pago").innerHTML = "<option selected='selected' value=''>---------</option><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option><option value='11'>11</option><option value='12'>12</option><option value='13'>13</option><option value='14'>14</option><option value='15'>15</option><option value='16'>16</option><option value='17'>17</option><option value='18'>18</option><option value='19'>19</option><option value='20'>20</option><option value='21'>21</option><option value='22'>22</option><option value='23'>23</option><option value='24'>24</option><option value='25'>25</option><option value='26'>26</option><option value='27'>27</option><option value='28'>28</option><option value='29'>29</option><option value='30'>30</option><option value='31'>ULTIMOS</option>";
        document.getElementById("id_fecha_de_pago").removeAttribute('disabled');

    }else{

        document.getElementById("id_fecha_de_pago").innerHTML = "<option selected='selected' value=''>---------</option>";
        $("#id_fecha_de_pago").attr("disabled","true");
        document.getElementById("alerta").innerHTML = "";
        document.getElementById("alerta").setAttribute('hidden','true');

    }

}

function chequear(val){

    if((val == '29')||(val == '30')){

        document.getElementById("alerta").innerHTML = "¡ALERTA! Febrero no presentará la alerta correspondiente ya que este solo pose 28 días.";
        document.getElementById("alerta").removeAttribute('hidden');

    }else{

        document.getElementById("alerta").innerHTML = "";
        document.getElementById("alerta").setAttribute('hidden','true');
    }

}

</script>
{% endblock %}