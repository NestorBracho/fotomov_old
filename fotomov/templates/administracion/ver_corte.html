{% extends 'tabla.html' %}
{% load bootstrap %}
{% block titulo %}
Corte de mes {{ prueba.monto }}
{% endblock %}
{% block seccion-contenido%}
<ul class="nav nav-tabs">
  <li class="active"><a href="#persona" class="btn" data-toggle="tab">Personas</a></li>
  <li><a href="#general" class="btn" data-toggle="tab">General</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane active" id="persona">
        <div class="col-md-12" style="margin-top: 10px">
            <table class="table table-striped table-hover" id="content">
                <thead>
                    <th>Nombre</th>
                    <th>Se le debe...</th>
                    <th>Acciones</th>
                </thead>
                <tbody>
                {% for gasto in gastos %}
                    <tr>
                        <td>{{gasto.usuario.nombre}} {{gasto.usuario.apellido}}</td>
                        <td>{{gasto.monto}}</td>
                        <td id="{{ gasto.usuario.id }}">
                            <a onclick="marcarPago('1','{{ gasto.usuario.id }}')" class="btn btn-xs btn-success">Marcar como pagado</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="tab-pane" id="general">
        <div class="col-md-12" style="padding-top: 10px">
            <table class="content table table-striped table-hover">
                <thead>
                    <th>Nombre</th>
                    <th>Monto</th>
                    <th>Evento</th>
                    <th>Acciones</th>
                </thead>
                <tbody>
                {% for gasto_sin in gastos_sin_usuario %}
                    <tr>
                        <td>{{gasto_sin.nombre}}</td>
                        <td>{{gasto_sin.monto}}</td>
                        <td>{{gasto_sin.evento.nombre}}</td>
                        <td id="{{ gasto_sin.id }}">
                            <a onclick="marcarPago('2','{{ gasto_sin.id }}')" class="btn btn-xs btn-success">Marcar como pagado</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
{% block js %}
<script type="text/javascript">

function marcarPago(action, iden){


    $.ajax({

        url: '/marcar_pagado_en_corte_mensual_ajax',
        type: 'GET',
        data: {'iden': iden, 'accion': action}

    }).done(function(data){

        $("#"+iden).html('<b>Pagado</b>');

    });

}

</script>
{% endblock %}