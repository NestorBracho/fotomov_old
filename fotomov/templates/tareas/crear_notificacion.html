{% extends 'tabla.html' %}
{% load bootstrap %}
{% block css %}
{% endblock %}
{% block titulo %}
Crear notificaci√≥n
{% endblock %}
{% block tabla %}
<form method="POST" action="">{% csrf_token %}
    <div class="row">
        <div class="col-sm-4">
            <input type="radio" name="direccion" id="sin_asoc" checked="" onclick="blockearCampos('1')">
            <span>Sin asociado</span>
        </div>
        <div class="col-sm-4">
            <input type="radio" name="direccion" id="macros_asoc" checked="" onclick="blockearCampos('2')">
            <span>Asociado a un macrocliente</span>
        </div>
        <div class="col-sm-4">
            <input type="radio" name="direccion" id="clientes_asoc" checked="" onclick="blockearCampos('3')">
            <span>Asociado a un cliente</span>
        </div>
    </div>
    <hr/>
    <div class="row">
        <div class="col-xs-12 col-sm-6">{{ formulario.notificacion | bootstrap }}</div>
        <div class="col-xs-12 col-sm-6">{{ formulario.tipo | bootstrap }}</div>
        <div class="col-md-6">
            <input type="submit" class="btn btn-default btn-primary" value="Ingresar">
        </div>
        <div class="col-xs-12 text-right">
            <div class="row">
                <div class="col-md-6 hidden-xs hidden-sm">
                    {%if estado == '2' %}
                        <table class="table table-striped  table-hover macros" id="content">
                            <thead>
                                <th>Macro Clientes</th>
                            </thead>
                            {% for macro in formulario.macro_cliente %}
                                {%if macro.choice_label != '---------'%}
                                    <tr>
                                         {# Or any other type you want. #}
                                        <td>{{ macro.choice_label }}&nbsp;{{ macro.tag }}</td>
                                    </tr>
                                {%endif%}
                            {% endfor %}       
                        </table>
                    {%elif estado == '3' %}
                        <table class="table table-striped  table-hover clientes" id="content">
                            <thead>
                                <th>Clientes</th>
                            </thead>
                            {% for cliente in formulario.cliente %}
                                {%if cliente.choice_label != '---------'%}
                                    <tr>
                                        <td>{{ cliente.choice_label }}&nbsp;{{ cliente.tag }}</td>
                                    </tr>
                                {%endif%}
                            {% endfor %}
                        </table>
                    {%endif%}
                </div>
            </div>
        </div>
    </div>
</form>

{% endblock %}
{% block js %}
<script type="text/javascript">
window.onload = function(){

    {% if flag == "true" %}
        window.history.go(-2);
    {% endif %}

    /*Caso para el estado de la pagina*/
    {% if estado == '2' %}
        document.getElementById('clientes_asoc').checked='false';
        document.getElementById('sin_asoc').checked='false';
        document.getElementById('macros_asoc').checked='true';

    {% elif estado == '3' %}
        document.getElementById('macros_asoc').checked='false';
        document.getElementById('sin_asoc').checked='false';
        document.getElementById('clientes_asoc').checked='true';

    {% else %}
        document.getElementById('clientes_asoc').checked='false';
        document.getElementById('macros_asoc').checked='false';
        document.getElementById('sin_asoc').checked='true';

    {% endif %}

    $('#clientes').hide();
    $('#macros').hide();
}

function blockearCampos(a){

    if(a == '1'){

        window.location.assign('/crear_notificacion/1');

    }else if(a == '2'){

        window.location.assign('/crear_notificacion/2');

    }else if(a == '3'){

        window.location.assign('/crear_notificacion/3');

    }
}
</script>
{% endblock %}